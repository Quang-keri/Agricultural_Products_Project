<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head th:replace="~{admin/layout :: common-styles}">
    <meta charset="UTF-8">
    <title>Product Management</title>
    <link rel="icon" type="image/png" href="/image/logo-web.png">
    <style>


    </style>
</head>
<body>
<header th:replace="~{admin/layout :: admin-header(user=${user})}"></header>

<div class="container-wrapper">
    <nav th:replace="~{admin/layout :: sidebar(currentPage='products')}"></nav>

    <main>
        <div class="card">
            <h2>Danh sách sản phẩm</h2>
            <a th:href="@{/admin/product/add}" class="add-user-button"> Thêm sản phẩm mới</a>

            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên</th>
                    <th>Danh mục</th>
                    <th>Giá</th>
                    <th>Số lượng</th>
                    <th>Mô tả</th>
                    <th>Ảnh</th>
                    <th>Hành động</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="product : ${products}">
                    <td th:text="${product.agriculturalProductId}">1</td>
                    <td th:text="${product.name}">Tên</td>
                    <td th:text="${product.category.name}">Danh mục</td>
                    <td th:text="${product.price}">0.0</td>
                    <td th:text="${product.quantityAvailable}">0</td>
                    <td th:text="${product.description}">Mô tả</td>
                    <td><img th:src="${product.imageUrl}" alt="Ảnh" width="50"/></td>
                    <td class="action-links">
                        <a th:href="@{'/admin/product/edit/' + ${product.agriculturalProductId}}">Sửa</a>
                        <a th:href="@{'/admin/product/delete/' + ${product.agriculturalProductId}}"
                           onclick="return confirm('Bạn chắc chắn muốn xoá sản phẩm này?');">Xoá</a>
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
        <div class="d-flex justify-content-center mt-4 mb-4">
            <nav>
                <ul class="pagination">
                    <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
                        <a class="page-link" th:href="@{|?pageNo=${currentPage > 1 ? currentPage - 1 : 1}|}">&laquo;</a>
                    </li>

                    <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPage)}"
                        th:classappend="${currentPage == i} ? 'active'">
                        <a class="page-link" th:href="@{|?pageNo=${i}|}" th:text="${i}">1</a>
                    </li>

                    <li class="page-item" th:classappend="${currentPage == totalPage} ? 'disabled'">
                        <a class="page-link" th:href="@{|?pageNo=${currentPage < totalPage ? currentPage + 1 : totalPage}|}">&raquo;</a>
                    </li>
                </ul>

            </nav>
        </div>
    </main>
</div>
</body>
</html>
